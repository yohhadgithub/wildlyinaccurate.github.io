<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Category: PHP | Wildly Inaccurate</title> <meta name="description" content="A collection of guides &amp; opinions about programming and the state of the web, from a developer at BBC News.
"> <link rel="stylesheet" href="/css/main.eceff5b.css"> <link rel="canonical" href="https://wildlyinaccurate.com/category/PHP"> <link rel="alternate" type="application/atom+xml" title="Wildly Inaccurate" href="https://wildlyinaccurate.com/feed.xml"> </head> <body> <nav class="navbar"> <div class="container"> <a href="https://wildlyinaccurate.com" class="navbar__title navbar__link">Wildly Inaccurate</a> <ul class="navbar-nav"> <li class="navbar-nav__item"> <a class="navbar-nav__item-link navbar__link" href="/about/">About</a> </li> <li class="navbar-nav__item"> <a class="navbar-nav__item-link navbar__link" href="/projects/">Projects</a> </li> <li class="navbar-nav__item"> <a class="navbar-nav__item-link navbar__link" href="/search/">Search</a> </li> </ul> </div> </nav> <header class="page-header page-header--no-meta"> <img class="page-header__featured-image" src="/assets/default-featured-image.jpg" srcset="/assets/resized/default-featured-image-320x134.jpg 320w, /assets/resized/default-featured-image-360x150.jpg 360w, /assets/resized/default-featured-image-720x301.jpg 720w, /assets/resized/default-featured-image-940x393.jpg 940w, /assets/resized/default-featured-image-1140x476.jpg 1140w, /assets/resized/default-featured-image-1280x535.jpg 1280w, /assets/resized/default-featured-image-1360x568.jpg 1360w, /assets/resized/default-featured-image-1680x702.jpg 1680w, /assets/resized/default-featured-image-1840x769.jpg 1840w,  /assets/default-featured-image.jpg 2600w"> <div class="container"> <h1 class="page-header__title">Category: PHP</h1> </div> </header> <section class="posts-index"> <article class="post-summary"> <span class="post-summary__meta">Nov 16, 2011</span> <h3> <a class="post-summary__link" href="/simple-nested-sets-in-doctrine-2/">Simple Nested Sets in Doctrine 2</a> </h3> <p></p><p>Unlike Doctrine 1 with it’s NestedSet behaviour, there is no nested set functionality in the core of Doctrine 2. There are a few extensions available that offer nested set support:</p> <ul> <li><a href="https://github.com/l3pp4rd/DoctrineExtensions">DoctrineExtensions by Gediminas Morkevicius</a></li> <li><a href="https://github.com/guilhermeblanco/Doctrine2-Hierarchical-Structural-Behavior">Doctrine2 Hierarchical Structural Behavior by Guilherme Blanco</a></li> <li><a href="https://github.com/blt04/doctrine2-nestedset">Doctrine2 NestedSet by Brandon Turner</a></li> </ul> <p>I tried all of these extensions, but none of them felt simple or lightweight enough for my application. What I wanted to do was have a Category entity which could have a tree of sub-categories, e.g:</p> <a href="/simple-nested-sets-in-doctrine-2/">(Read more)</a> </article> <article class="post-summary"> <span class="post-summary__meta">Oct 12, 2011</span> <h3> <a class="post-summary__link" href="/doctrine-2-resolving-unknown-database-type-enum-requested/">Doctrine 2: Resolving "unknown database type enum requested"</a> </h3> <p></p><p>I came across this recently while I was developing a module for PyroCMS. Some of the PyroCMS tables contain ENUM columns, which Doctrine doesn’t support. You would think that this wouldn’t be an issue since these tables are not mapped, but apparently when Doctrine builds the schema it includes all tables in the database - even if they are not mapped. This has been <a href="http://www.doctrine-project.org/jira/browse/DDC-1273">reported as an issue</a>, but the Doctrine team has given it a low priority.</p> <p>The symptom? When using the SchemaTool to create, update, or drop the schema; an exception is thrown:</p> <div><pre><code>**Fatal error**: Uncaught exception 'Doctrine\DBAL\DBALException' with message 'Unknown database type enum requested, Doctrine\DBAL\Platforms\MySqlPlatform may not support it.'
</code></pre> </div> <p>Thankfully, the fix is very easy. There is even a <a href="http://www.doctrine-project.org/docs/orm/2.1/en/cookbook/mysql-enums.html">Doctrine Cookbook article</a> about it. All you have to do is register the ENUM type as a Doctrine varchar (string):</p> <div><pre><code>/** @var $em \Doctrine\ORM\EntityManager */
$platform = $em-&gt;getConnection()-&gt;getDatabasePlatform();
$platform-&gt;registerDoctrineTypeMapping('enum', 'string');
</code></pre> </div> <p>This fix can be applied to any unsupported data type, for example SET (which is also used in PyroCMS):</p> <div><pre><code>$platform-&gt;registerDoctrineTypeMapping('set', 'string');
</code></pre> </div> <a href="/doctrine-2-resolving-unknown-database-type-enum-requested/">(Read more)</a> </article> <article class="post-summary"> <span class="post-summary__meta">Jun 24, 2011</span> <h3> <a class="post-summary__link" href="/convert-print-and-echo-statements-to-short-syntax/">Convert print and echo statements to short syntax</a> </h3> <p></p><p>It’s debatable whether or not it’s good practice to use short syntax in PHP. I personally prefer to use short syntax because it keeps my view files looking tidy.</p> <p>The regular expression below will find all one-liner <code>print</code> and <code>echo</code> statements (e.g. <code>&lt;?php print $var; ?&gt;</code>) and convert them to <code>&lt;?=$var?&gt;</code> statements. It will not match statements containing closing brackets, for example when using ternary operators: <code>&lt;?=($foo == $bar) ? 'Foobar' : 'Foo'?&gt;</code></p> <div><pre><code>Find:
&lt;\?php[\s]*(print|echo)[\s]*\(?([^&gt;\)]+?)\)?[\s]*;?[\s]*\?&gt;
</code></pre> </div> <div><pre><code>Replace:
&lt;?=$2?&gt;
</code></pre> </div> <a href="/convert-print-and-echo-statements-to-short-syntax/">(Read more)</a> </article> <article class="post-summary"> <span class="post-summary__meta">Nov 13, 2010</span> <h3> <a class="post-summary__link" href="/eaccelerator-and-doctrine-2/">eAccelerator and Doctrine 2</a> </h3> <p></p><p>A word of warning: eAccelerator does not play well with Doctrine 2. This came to my attention today after I installed eAccelerator so that I could measure the performance gains (if any). As it turns out, one of eAccelerator’s “features” is to remove Docblocks from PHP scripts - probably to reduce compile times. Suddenly my application was throwing exceptions with the message “Class <em>X</em> is not a valid entity or mapped super class”.</p> <a href="/eaccelerator-and-doctrine-2/">(Read more)</a> </article> <article class="post-summary"> <span class="post-summary__meta">Nov 8, 2010</span> <h3> <a class="post-summary__link" href="/segment-based-urls-with-query-strings-in-codeigniter-2/">Segment-Based URLs with Query Strings in CodeIgniter 2</a> </h3> <p></p><p>My latest CodeIgniter 2 project requires that I use query strings in some of my URLs. CodeIgniter 1 was notoriously difficult to work with when you enabled query strings, and unfortunately CodeIgniter 2 is no different. Whereas in CodeIgniter 1 you could change two configuration options to enable a combination of segment-based URLs and query strings, this same approach only makes matters worse in CodeIgniter 2.</p> <a href="/segment-based-urls-with-query-strings-in-codeigniter-2/">(Read more)</a> </article> <article class="post-summary"> <span class="post-summary__meta">Oct 4, 2010</span> <h3> <a class="post-summary__link" href="/custom-doctrine-2-console-commands/">Custom Doctrine 2 Console Commands</a> </h3> <p></p><p><em>This post assumes you have set up <a href="http://eryr.wordpress.com/2010/09/26/integrating-doctrine-2-with-codeigniter-2/">Doctrine 2 with CodeIgniter 2</a>.</em></p> <h2>Load Data from Fixtures</h2> <p>I could not find a command to load data from fixtures, so I made a very basic command that recursively executes native SQL. If you want to load data from YAML files, you will need to search elsewhere for a YAML interpreter or even a way to convert YAML to SQL.</p> <a href="/custom-doctrine-2-console-commands/">(Read more)</a> </article> <article class="post-summary"> <span class="post-summary__meta">Sep 26, 2010</span> <h3> <a class="post-summary__link" href="/integrating-doctrine-2-with-codeigniter-2/">Integrating Doctrine 2 with CodeIgniter 2</a> </h3> <p></p><p><em>If you’re looking for a quick way to get Doctrine 2 running with CodeIgniter 2, you might want to download my <a href="https://github.com/wildlyinaccurate/CodeIgniter-2-with-Doctrine-2">CodeIgniter 2/Doctrine 2 package</a></em></p> <h2>Overview</h2> <p>CodeIgniter is a great PHP framework. The codebase is clean, the <a href="http://codeigniter.com/user_guide/">documentation</a> is fantastic, and it’s regularly updated. Doctrine is a good ORM for the same reasons: it’s very well-written, has <a href="http://www.doctrine-project.org/projects/orm/2.1/docs/en">extensive documentation</a>, and is actively developed. A combination of these two systems makes it easy to build database-oriented web applications quicker than ever before.</p> <p>To get started, download <a href="http://codeigniter.com/download.php">CodeIgniter 2</a> and <a href="http://www.doctrine-project.org/projects/orm.html">Doctrine 2</a> – make sure you use the ‘Download Archive’ link when downloading Doctrine.</p> <a href="/integrating-doctrine-2-with-codeigniter-2/">(Read more)</a> </article> </section> <footer class="page-footer"> <ul class="social-media"> <li> <a href="https://github.com/wildlyinaccurate"> <span class="social-media__icon"> <svg viewBox="0 0 16 16"> <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/> </svg> </span> <span class="username">wildlyinaccurate</span> </a> </li> <li> <a href="https://twitter.com/Joseph_Wynn"> <span class="social-media__icon"> <svg viewBox="0 0 16 16"> <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                        c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/> </svg> </span> <span class="username">Joseph_Wynn</span> </a> </li> </ul> <p class="site-description site-description--footer">A collection of guides &amp; opinions about programming and the state of the web, from a developer at BBC News. </p> </footer> <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-20744182-3', 'auto');
          ga('send', 'pageview');</script> <script>(function() {
                var s, p, n, a;

                s = document.createElement('script');
                s.async = 1;
                s.src = '//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=wildlyinaccuratecom';
                s.id = '_carbonads_js';

                p = document.createElement('p');
                p.appendChild(s);

                n = document.querySelector('.post-content > p:nth-of-type(3)');

                if (n) {
                    n.parentNode.insertBefore(p, n.nextSibling);
                } else {
                    n = document.getElementsByTagName('article')[0];
                    n.parentNode.insertBefore(p, n.nextSibling);
                }
            })();</script> </body> </html>